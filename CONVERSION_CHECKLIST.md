# Migration Checklist - What Needs Editor Conversion

## ✅ Completed (via code migration)

### TypeScript Code Migration
- [x] All 12 JavaScript files converted to TypeScript
- [x] All Cocos Creator 2.x APIs updated to 3.x
- [x] Component decorators (@ccclass, @property)
- [x] Vec2 API updated
- [x] Tween system (replaces action system)
- [x] AudioSource API
- [x] Event handling updated
- [x] Type annotations added
- [x] Meta files renamed (.js.meta → .ts.meta)

### Project Configuration
- [x] project.json → version 3.8.6
- [x] tsconfig.json created
- [x] package.json added
- [x] settings/project.json updated to v3.x structure
- [x] .gitignore updated

### Documentation
- [x] MIGRATION_GUIDE.md created
- [x] MIGRATION_SUMMARY.md created
- [x] SCENE_CONVERSION_GUIDE.md created
- [x] README.md updated

## ⚠️ REQUIRES Cocos Creator 3.8.6 Editor

These files CANNOT be converted via code - they must be opened in the editor:

### Scene Files (2 files)
- [ ] `assets/Scene/Login.fire` - Login scene
- [ ] `assets/Scene/Game.fire` - Main game scene

**Format:** Cocos Creator 2.x JSON serialization → 3.x format
**Action:** Open in editor, allow automatic conversion

### Prefab Files (9 files)
- [ ] `assets/Prefabs/BombWhite.prefab`
- [ ] `assets/Prefabs/Fox.prefab`
- [ ] `assets/Prefabs/Crush.prefab`
- [ ] `assets/Prefabs/Bird.prefab`
- [ ] `assets/Prefabs/Cat.prefab`
- [ ] `assets/Prefabs/Horse.prefab`
- [ ] `assets/Prefabs/Bear.prefab`
- [ ] `assets/Prefabs/Frog.prefab`
- [ ] `assets/Prefabs/Chicken.prefab`

**Format:** Cocos Creator 2.x prefab → 3.x format
**Action:** Open in editor, allow automatic conversion

### Animation Clips (~40+ files)
Located in `assets/AnimationClip/`:
- [ ] bear/ (4 animations: click, column, line, wrap)
- [ ] bird/ (2 animations: bird, effect)
- [ ] bomb/ (2 animations: effect_col, effect_line)
- [ ] cat/ (4 animations: click, column, line, wrap)
- [ ] chicken/ (4 animations: click, column, line, wrap)
- [ ] crush/ (1 animation: effect)
- [ ] fox/ (4 animations: click, column, line, wrap)
- [ ] frog/ (4 animations: click, column, line, wrap)
- [ ] horse/ (4 animations: click, column, line, wrap)

**Format:** cc.AnimationClip v2.x → v3.x format
**Action:** Editor will automatically convert these

### Build Configuration
- [ ] `settings/builder.json` - Build settings
- [ ] `settings/builder.panel.json` - Builder panel config

**Format:** v2.x build configuration → v3.x format
**Action:** Will be regenerated by editor on first build

### Meta Files
All meta files will be regenerated by the editor:
- Scene meta files (.fire.meta)
- Prefab meta files (.prefab.meta)
- Animation meta files (.anim.meta)
- Asset meta files

**Format:** v2.x meta format → v3.x meta format
**Action:** Automatically handled by editor

## Conversion Process

### Step 1: Backup
```bash
# Create a backup before opening in editor
git add .
git commit -m "Before editor conversion"
```

### Step 2: Open in Cocos Creator 3.8.6
1. Launch Cocos Creator 3.8.6
2. Open project directory
3. Editor detects v2.x format
4. Click "OK" for automatic upgrade

### Step 3: Monitor Conversion
The editor will:
- Convert all .fire files
- Convert all .prefab files
- Convert all .anim files
- Regenerate all .meta files
- Update build settings
- Create new temp/build directories

### Step 4: Verify
After conversion:
- [ ] Open Login.fire - verify it loads
- [ ] Open Game.fire - verify it loads
- [ ] Check each prefab opens correctly
- [ ] Verify script components reference .ts files (not .js)
- [ ] Test Play in editor
- [ ] Check for console errors

### Step 5: Update Script References
If any components still reference .js files:
1. Select the node
2. In Inspector, find the script component
3. Click the file selector
4. Choose the corresponding .ts file

### Step 6: Test Build
- [ ] Configure build settings for target platform
- [ ] Build the project
- [ ] Test on target platform
- [ ] Verify all functionality works

## Common Post-Conversion Issues

### Issue: "Script not found"
**Cause:** Component references old .js file
**Fix:** Manually assign .ts file in Inspector

### Issue: "Property values missing"
**Cause:** Some property types changed between versions
**Fix:** Manually reconfigure in Inspector

### Issue: Animation doesn't play
**Cause:** Animation clip references may be broken
**Fix:** Re-assign animation clips in Animation component

### Issue: Prefab connection broken
**Cause:** Prefab format changed
**Fix:** Re-link prefab in scene hierarchy

## After Conversion

Once conversion is complete:
1. Commit all changed files
2. Test thoroughly in editor
3. Build for target platforms
4. Deploy and test

## Estimated Time

- Automatic conversion: 5-10 minutes
- Manual verification: 30-60 minutes
- Testing and fixes: 1-2 hours
- **Total: 2-3 hours**

## Support

If issues arise:
- See [SCENE_CONVERSION_GUIDE.md](./SCENE_CONVERSION_GUIDE.md)
- See [MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md)
- Check Cocos Creator 3.8 documentation
- Review editor console for specific errors

## Current State Summary

**Code Ready:** ✅ All TypeScript code migrated and tested
**Assets Ready:** ⚠️ Waiting for editor conversion
**Next Step:** Open project in Cocos Creator 3.8.6 Editor
