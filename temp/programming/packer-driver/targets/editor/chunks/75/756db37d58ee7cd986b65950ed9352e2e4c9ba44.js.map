{"version":3,"sources":["file:///D:/dev/%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9/NewProject/assets/Script/View/CellView.ts"],"names":["_decorator","Component","SpriteFrame","ccclass","property","CellView","onLoad","initWithModel","model","updateView","setSelect","flag"],"mappings":";;;;;;;;;;;;;;;;AAGSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;;;;;;AAHhC;AACA;AACA;;;;;OAEM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;0BAIjBK,Q,WADZF,OAAO,CAAC,UAAD,C,UAEHC,QAAQ,CAACF,WAAD,C,2BAFb,MACaG,QADb,SAC8BJ,SAD9B,CACwC;AAAA;AAAA;;AAAA;AAAA;;AAIpCK,QAAAA,MAAM,GAAI,CACN;AACH;;AAEDC,QAAAA,aAAa,CAAEC,KAAF,EAAc,CACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACI;AACJ;AACH;;AAEDC,QAAAA,UAAU,GAAI,CACV;AACA;AACI;AACJ;AACA;AACA;AACA;AACI;AACI;AACA;AACJ;AACA;AACI;AACA;AACA;AACA;AACJ;AACA;AACI;AACI;AACA;AACA;AACJ;AACA;AACI;AACJ;AACA;AACJ;AACA;AACI;AACA;AACI;AACI;AACJ;AACA;AACI;AACJ;AACJ;AACJ;AACA;AACI;AACA;AACA;AACJ;AACA;AACJ;AACA;AACI;AACJ;AACA;AACI;AACJ;AACH;;AAEDC,QAAAA,SAAS,CAAEC,IAAF,EAAa,CAClB;AACA;AACA;AACI;AACA;AACJ;AACA;AACI;AACJ;AACA;AACI;AACJ;AACA;AACA;AACH;;AA7FmC,O;;;;;iBAEd,I;;;AAgG1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["/**\n* 智障的引擎设计，一群SB\n*/\nimport { _decorator, Component, SpriteFrame } from 'cc';\nconst { ccclass, property } = _decorator;\n\nimport {CELL_STATUS, CELL_WIDTH, CELL_HEIGHT, ANITIME} from '../Model/ConstValue';\n@ccclass('CellView')\nexport class CellView extends Component {\n    @property(SpriteFrame)\n    public defaultFrame = null;\n\n    onLoad () {\n        // this.isSelect = false; \n    }\n\n    initWithModel (model: any) {\n        // this.model = model; \n        // var x = model.startX; \n        // var y = model.startY; \n        // this.node.x = CELL_WIDTH * (x - 0.5); \n        // this.node.y = CELL_HEIGHT * (y - 0.5); \n        // var animation  = this.node.getComponent(cc.Animation); \n        // if (model.status == CELL_STATUS.COMMON){ \n            // animation.stop(); \n        // }  \n        // else{ \n            // animation.play(model.status); \n        // } \n    }\n\n    updateView () {\n        // var cmd = this.model.cmd; \n        // if(cmd.length <= 0){ \n            // return ; \n        // } \n        // var actionArray = []; \n        // var curTime = 0; \n        // for(var i in cmd){ \n            // if( cmd[i].playTime > curTime){ \n                // var delay = cc.delayTime(cmd[i].playTime - curTime); \n                // actionArray.push(delay); \n            // } \n            // if(cmd[i].action == \"moveTo\"){ \n                // var x = (cmd[i].pos.x - 0.5) * CELL_WIDTH; \n                // var y = (cmd[i].pos.y - 0.5) * CELL_HEIGHT; \n                // var move = cc.moveTo(ANITIME.TOUCH_MOVE, cc.v2(x,y)); \n                // actionArray.push(move); \n            // } \n            // else if(cmd[i].action == \"toDie\"){ \n                // if(this.status == CELL_STATUS.BIRD){ \n                    // let animation = this.node.getComponent(cc.Animation); \n                    // animation.play(\"effect\"); \n                    // actionArray.push(cc.delayTime(ANITIME.BOMB_BIRD_DELAY)); \n                // } \n                // var callFunc = cc.callFunc(function(){ \n                    // this.node.destroy(); \n                // },this); \n                // actionArray.push(callFunc); \n            // } \n            // else if(cmd[i].action == \"setVisible\"){ \n                // let isVisible = cmd[i].isVisible; \n                // actionArray.push(cc.callFunc(function(){ \n                    // if(isVisible){ \n                        // this.node.opacity = 255; \n                    // } \n                    // else{ \n                        // this.node.opacity = 0; \n                    // } \n                // },this)); \n            // } \n            // else if(cmd[i].action == \"toShake\"){ \n                // let rotateRight = cc.rotateBy(0.06,30); \n                // let rotateLeft = cc.rotateBy(0.12, -60); \n                // actionArray.push(cc.repeat(cc.sequence(rotateRight, rotateLeft, rotateRight), 2)); \n            // } \n            // curTime = cmd[i].playTime + cmd[i].keepTime; \n        // } \n        // if(actionArray.length == 1){ \n            // this.node.runAction(actionArray[0]); \n        // } \n        // else{ \n            // this.node.runAction(cc.sequence(...actionArray)); \n        // } \n    }\n\n    setSelect (flag: any) {\n        // var animation = this.node.getComponent(cc.Animation); \n        // var bg = this.node.getChildByName(\"select\"); \n        // if(flag == false && this.isSelect && this.model.status == CELL_STATUS.COMMON){ \n            // animation.stop(); \n            // this.node.getComponent(cc.Sprite).spriteFrame = this.defaultFrame; \n        // } \n        // else if(flag && this.model.status == CELL_STATUS.COMMON){ \n            // animation.play(CELL_STATUS.CLICK); \n        // } \n        // else if(flag && this.model.status == CELL_STATUS.BIRD){ \n            // animation.play(CELL_STATUS.CLICK); \n        // } \n        // bg.active = flag;  \n        // this.isSelect = flag; \n    }\n\n}\n\n\n/**\n * 注意：已把原脚本注释，由于脚本变动过大，转换的时候可能有遗落，需要自行手动转换\n */\n// import {CELL_STATUS, CELL_WIDTH, CELL_HEIGHT, ANITIME} from '../Model/ConstValue';\r\n// \r\n// cc.Class({\r\n//     extends: cc.Component,\r\n// \r\n//     properties: {\r\n//         // foo: {\r\n//         //    default: null,      // The default value will be used only when the component attaching\r\n//         //                           to a node for the first time\r\n//         //    url: cc.Texture2D,  // optional, default is typeof default\r\n//         //    serializable: true, // optional, default is true\r\n//         //    visible: true,      // optional, default is true\r\n//         //    displayName: 'Foo', // optional\r\n//         //    readonly: false,    // optional, default is false\r\n//         // },\r\n//         // ...\r\n//         defaultFrame:{\r\n//             default: null,\r\n//             type: cc.SpriteFrame\r\n//         }\r\n//     },\r\n// \r\n//     // use this for initialization\r\n//     onLoad: function () {\r\n//         //this.model = null;\r\n//         this.isSelect = false;\r\n//     },\r\n//     initWithModel: function(model){\r\n//         this.model = model;\r\n//         var x = model.startX;\r\n//         var y = model.startY;\r\n//         this.node.x = CELL_WIDTH * (x - 0.5);\r\n//         this.node.y = CELL_HEIGHT * (y - 0.5);\r\n//         var animation  = this.node.getComponent(cc.Animation);\r\n//         if (model.status == CELL_STATUS.COMMON){\r\n//             animation.stop();\r\n//         } \r\n//         else{\r\n//             animation.play(model.status);\r\n//         }\r\n//     },\r\n//     // 执行移动动作\r\n//     updateView: function(){\r\n//         var cmd = this.model.cmd;\r\n//         if(cmd.length <= 0){\r\n//             return ;\r\n//         }\r\n//         var actionArray = [];\r\n//         var curTime = 0;\r\n//         for(var i in cmd){\r\n//             if( cmd[i].playTime > curTime){\r\n//                 var delay = cc.delayTime(cmd[i].playTime - curTime);\r\n//                 actionArray.push(delay);\r\n//             }\r\n//             if(cmd[i].action == \"moveTo\"){\r\n//                 var x = (cmd[i].pos.x - 0.5) * CELL_WIDTH;\r\n//                 var y = (cmd[i].pos.y - 0.5) * CELL_HEIGHT;\r\n//                 var move = cc.moveTo(ANITIME.TOUCH_MOVE, cc.v2(x,y));\r\n//                 actionArray.push(move);\r\n//             }\r\n//             else if(cmd[i].action == \"toDie\"){\r\n//                 if(this.status == CELL_STATUS.BIRD){\r\n//                     let animation = this.node.getComponent(cc.Animation);\r\n//                     animation.play(\"effect\");\r\n//                     actionArray.push(cc.delayTime(ANITIME.BOMB_BIRD_DELAY));\r\n//                 }\r\n//                 var callFunc = cc.callFunc(function(){\r\n//                     this.node.destroy();\r\n//                 },this);\r\n//                 actionArray.push(callFunc);\r\n//             }\r\n//             else if(cmd[i].action == \"setVisible\"){\r\n//                 let isVisible = cmd[i].isVisible;\r\n//                 actionArray.push(cc.callFunc(function(){\r\n//                     if(isVisible){\r\n//                         this.node.opacity = 255;\r\n//                     }\r\n//                     else{\r\n//                         this.node.opacity = 0;\r\n//                     }\r\n//                 },this));\r\n//             }\r\n//             else if(cmd[i].action == \"toShake\"){\r\n//                 let rotateRight = cc.rotateBy(0.06,30);\r\n//                 let rotateLeft = cc.rotateBy(0.12, -60);\r\n//                 actionArray.push(cc.repeat(cc.sequence(rotateRight, rotateLeft, rotateRight), 2));\r\n//             }\r\n//             curTime = cmd[i].playTime + cmd[i].keepTime;\r\n//         }\r\n//         /**\r\n//          * 智障的引擎设计，一群SB\r\n//          */\r\n//         if(actionArray.length == 1){\r\n//             this.node.runAction(actionArray[0]);\r\n//         }\r\n//         else{\r\n//             this.node.runAction(cc.sequence(...actionArray));\r\n//         }\r\n// \r\n//     },\r\n//     // called every frame, uncomment this function to activate update callback\r\n//     // update: function (dt) {\r\n// \r\n//     // },\r\n//     setSelect: function(flag){\r\n//         var animation = this.node.getComponent(cc.Animation);\r\n//         var bg = this.node.getChildByName(\"select\");\r\n//         if(flag == false && this.isSelect && this.model.status == CELL_STATUS.COMMON){\r\n//             animation.stop();\r\n//             this.node.getComponent(cc.Sprite).spriteFrame = this.defaultFrame;\r\n//         }\r\n//         else if(flag && this.model.status == CELL_STATUS.COMMON){\r\n//             animation.play(CELL_STATUS.CLICK);\r\n//         }\r\n//         else if(flag && this.model.status == CELL_STATUS.BIRD){\r\n//             animation.play(CELL_STATUS.CLICK);\r\n//         }\r\n//         bg.active = flag; \r\n//         this.isSelect = flag;\r\n//     }\r\n// });\n"]}